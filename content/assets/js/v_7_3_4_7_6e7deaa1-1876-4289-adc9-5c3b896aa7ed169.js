import{j as e,b7 as R,F as T,bo as $,X as v,H as S,af as B,K as C,ah as E,bp as D,bq as G,x as H,I as k}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed10.js";import{a as g}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed4.js";import{aA as y,a as q,o as M,b as V,aB as W,n as _}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed22.js";import{u as A,c as O}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed19.js";import{F as I}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed45.js";import{g as K,m as X}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed39.js";import{U as J}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed69.js";import{W as Q}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed18.js";import{A as Y}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed132.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed8.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed5.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed7.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed6.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed2.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed3.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed9.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed21.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed46.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed36.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed58.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed105.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed106.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed26.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed35.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed107.js";function Z(){const{activeColapse:i,setActiveColapse:u,activeFollowUp:s,setTimingAcionamento:m,setDispararAcionamento:n}=y(),{language:t}=A(),[l,p]=g.useState(s.acionamento.timing.days),[o,c]=g.useState(s.acionamento.timing.hours),[r,h]=g.useState(s.acionamento.timing.minutes|5);g.useEffect(()=>{m({days:l,hours:o,minutes:r})},[l,o,r,m]);const b=()=>{const d=String(o).padStart(2,"0"),f=String(r).padStart(2,"0");return`${d}:${f}`},x=()=>{let d="";return l===1?d=l+" "+t.day:l>1&&(d=l+" "+t.days),l&&(o||r)&&(d+=" "+t.and+" "),o!==0?d+=" "+b()+" "+t.hours:r!==0&&(d+=" "+r+" "+t.minutes),d},j=e.jsxs("div",{className:"flex flex-col gap-2 justify-center items-start mt-2",children:[e.jsxs("div",{className:"flex text-sm font-bold",children:[e.jsx("span",{children:t.setActionTime}),e.jsx("span",{className:"ml-1 cursor-pointer lg:tooltip lg:tooltip-right","data-tip":t.tooltipSetActionTime,children:e.jsx("span",{className:"pulse",children:e.jsx(R,{className:"w-5 h-5 text-[var(--primaria)]"})})})]}),e.jsxs("div",{className:"flex flex-row gap-4 justify-center items-center w-full px-1",children:[e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label !pb-[2px]",children:e.jsx("h4",{className:"font-semibold",children:`${t.days}:`})}),e.jsx("input",{id:"dias",type:"number",placeholder:t.days,min:"0",value:l===0?"":l,onChange:d=>{const f=d.target.value===""?0:Number(d.target.value);p(f)},className:"input input-bordered w-full input-sm"})]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label !pb-[2px]",children:e.jsx("h4",{className:"font-semibold",children:`${t.hours}:`})}),e.jsx("input",{id:"horas",type:"time",placeholder:t.hours,value:b(),onChange:d=>{const[f,a]=d.target.value.length!==0?d.target.value.split(":"):["00","05"];c(parseInt(f,10)),h(parseInt(a,10))},className:"input input-bordered w-full input-sm"})]})]}),e.jsx("div",{className:"text-center p-1 m-auto",children:e.jsxs(T,{weight:"600",size:"16px",children:[t.dispartAcionamento," ",x()," ",t.dispartAcionamentoAfter]})}),e.jsxs("div",{role:"alert",className:"alert alert-info mt-2",style:{zoom:"80%"},children:[e.jsx($,{className:"w-7 h-7"}),e.jsx("span",{className:"font-semibold",style:{fontSize:"17px"},children:t.actionVerifyEvery5Minutes})]})]});return e.jsxs("div",{className:"collapse collapse-arrow shadow-md border border-solid border-[var(--intro-background)] min-h-[54px] "+(i==="acionamento"?"":"bg-base-200"),children:[e.jsx("input",{type:"radio",name:"my-accordion-2",checked:i==="acionamento",onChange:()=>u("acionamento")}),e.jsx("div",{className:"collapse-title text-xl font-bold",children:t.actionFollowUp}),e.jsx("div",{className:"collapse-content",children:e.jsxs("div",{className:"gap-2 h-full overflow-y-auto",children:[e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(v,{id:"dispararAoEntrar",estado:s.acionamento.type==="dispararAoEntrar",checkedUpdade:()=>n("dispararAoEntrar")}),e.jsx("span",{className:"label-text",children:t.dispatchImediatellyEnterFunil})]}),e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(v,{id:"dispararAoSair",estado:s.acionamento.type==="dispararAoSair",checkedUpdade:()=>n("dispararAoSair")}),e.jsx("span",{className:"label-text",children:t.dispatchImediatellyLeaveFunil})]}),e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(v,{id:"timing",estado:s.acionamento.type==="timing",checkedUpdade:()=>n("timing")}),e.jsx("span",{className:"label-text",children:t.dispatchTime})]}),s.acionamento.type==="timing"&&j]})})]})}function ee(){var c,r,h,b,x,j,N,d,f;const{activeColapse:i,setActiveColapse:u,activeFollowUp:s,setRegraUpdate:m,setRegrasUpdateAssinatura:n,setAssinaturaName:t}=y(),{language:l}=A(),p=s.regras.assinatura.propriedades;return e.jsxs("div",{className:"collapse collapse-arrow shadow-md border border-solid border-[var(--intro-background)] min-h-[54px] "+(i==="regras"?"":"bg-base-200"),children:[e.jsx("input",{type:"radio",name:"my-accordion-2",checked:i==="regras",onChange:()=>u("regras")}),e.jsx("div",{className:"collapse-title text-xl font-bold",children:l.regrasDeAcionamento}),e.jsx("div",{className:"collapse-content",children:e.jsxs("div",{className:"gap-2 h-full overflow-y-auto",children:[e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(v,{id:((r=(c=s==null?void 0:s.regras)==null?void 0:c.cancelAfterChat)==null?void 0:r.type)||"cancelAfterChat",estado:((x=(b=(h=s==null?void 0:s.regras)==null?void 0:h.cancelAfterChat)==null?void 0:b.propriedades)==null?void 0:x.active)||!1,checkedUpdade:()=>m("cancelAfterChat")}),e.jsx("span",{className:"label-text",children:l.cancelAfterChat})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(v,{id:((N=(j=s==null?void 0:s.regras)==null?void 0:j.responderGrupos)==null?void 0:N.type)||"responderGrupos",estado:s.regras.responderGrupos.propriedades.active||!1,checkedUpdade:()=>m("responderGrupos")}),e.jsx("span",{className:"label-text",children:l.permitirResponderEmGrupos})]})}),e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"cursor-pointer label justify-start gap-2",children:[e.jsx(v,{id:((f=(d=s==null?void 0:s.regras)==null?void 0:d.assinatura)==null?void 0:f.type)||"assinatura",estado:p.active||!1,checkedUpdade:()=>m("assinatura")}),e.jsx("span",{className:"label-text",children:l.personalizarOuDesativarAss})]}),p.active&&e.jsxs("div",{className:"flex flex-col pl-6 gap-0.5",children:[e.jsxs("label",{className:"label !p-0 max-w-xs",htmlFor:"desativarAss",children:[e.jsx("span",{className:"mr-3 font-bold text-base",children:l.desativarAss}),e.jsx(S,{id:"desativarAss",estado:p.desativarAss,switchUpdate:()=>n("desativarAss"),corPrimaria:!0,zoom:{zoom:"85%"}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label !p-0 max-w-xs",htmlFor:"persAss",children:[e.jsx("span",{className:"mr-3 font-bold text-base",children:l.personalizarNomeAss}),e.jsx(S,{id:"persAss",estado:p.persAss.active,switchUpdate:()=>n("persAss"),corPrimaria:!0,disabled:p.desativarAss,zoom:{zoom:"85%"}})]}),p.persAss.active&&e.jsxs("label",{className:"input input-bordered border border-solid input-sm flex items-center gap-2 w-full max-w-xs mt-1",children:[e.jsx(K,{fill:"currentColor",className:"h-4 w-4 opacity-70"}),e.jsx("input",{type:"text",placeholder:l.insiraNomeAss,value:p.persAss.nameAss,onChange:a=>t(a.target.value),className:"grow"})]})]})]})]})]})})]})}const z=({id:i,name:u,estado:s,fn:m,icon:n})=>e.jsx("div",{className:"w-full",children:e.jsx("label",{htmlFor:i,children:e.jsxs("div",{className:"flex gap-1 items-center cursor-pointer",children:[e.jsx(v,{id:i,estado:s,checkedUpdade:m}),e.jsx(T,{children:u}),n]})})});function se(){const{addAbaInFunil:i,addLabelInFunil:u,LabelOrTabIsExist:s,activeTabOrLabel:m,setActiveTabOrLabel:n,removeLabelInFunil:t,removeAbaInFunil:l}=y(),{language:p}=A(),{isBusiness:o}=O(),{userTabs:c}=q(),{close:r}=M(),[h,b]=g.useState([]);g.useEffect(()=>{(async()=>{const a=await Q.Labels("getAllLabels");b(a)})()},[]);const x=["labels","userTabs"],j=J(),N=(a,F,U)=>{var L;if(s(a))F==="labels"?t(a):l(a);else if(F==="labels"){const w=h.find(P=>P.id===a);u({...w,chats:[]})}else i({id:a,tag:U.tag,type:"aba",chats:((L=U.chats)==null?void 0:L.map(w=>({...w,date:null})))||[]})},d={labels:h.map(a=>e.jsx(z,{id:a.id,name:a.name,estado:s(a.id),fn:()=>N(a.id,"labels"),icon:e.jsx(E,{size:20,style:{color:a.hexColor}})})),userTabs:c.length!==0?c.map(a=>e.jsx(z,{id:a.id,name:a.tag,estado:s(a.id),fn:()=>N(a.id,"userTabs",a),icon:e.jsx(B,{size:20,className:"text-[var(--primaria)]"})})):e.jsx("div",{className:"m-auto",children:e.jsx(C,{name:p.create,funcao:()=>{r(),j()}})})};return e.jsxs("div",{className:"w-[350px] p-3 !pt-0",children:[e.jsx("div",{className:"tabs tabs-bordered mt-4",children:x.map(a=>{if(!(!o&&a==="labels"))return e.jsxs("label",{className:"tab "+(a===m?"tab-activeTabOrLabel !border-[var(--primaria)]":""),htmlFor:a,children:[e.jsx("span",{children:p["filter_"+a]}),e.jsx("input",{id:a,type:"checkbox",checked:a===m,onChange:()=>n(a),className:"hidden"})]})})}),e.jsx("div",{className:"flex gap-1 flex-col mt-4 overflow-y-auto",style:{maxHeight:"30vh"},children:d[m]})]})}function ae(){const{removeAbaInFunil:i,removeLabelInFunil:u,activeFollowUp:s}=y(),{open:m}=M(),{language:n}=A(),{isBusiness:t}=O(),l=[...(s.funil.abas||[]).map(o=>({...o,type:"aba"})),...(s.funil.etiquetas||[]).map(o=>({...o,type:"etiqueta"}))],p=o=>{const c=o.currentTarget;m(e.jsx(se,{}),{placement:"bottom"},c,10,{mounted:()=>c.setAttribute("style","outline: 2px solid hsl(var(--bc) / 0.2); outline-offset: 2px;"),desmouted:()=>c.removeAttribute("style")})};return e.jsxs("div",{className:"flex flex-col gap-2 shadow-md border border-solid border-[var(--intro-background)] p-2 rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(D,{className:"w-5 h-5 text-[var(--primaria)]"}),e.jsx("h2",{className:"text-lg",children:t?n.selectTabAndLabel:n.selectTab})]})}),e.jsx("div",{className:"form-control w-full",children:e.jsx("div",{className:"select select-bordered select-sm !cursor-pointer border border-solid",onClick:p,children:t?n.clickToAddTabAndLabel:n.clickToAddTab})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[l.length>0&&e.jsx("span",{className:"font-bold text-base",children:`${t?n.addTabAndLabel:n.addTab}:`}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:l.map(o=>{const c=o.type==="etiqueta",r=c?E:G,h=c?o.name:o.tag,b=c?u:i,x=c?o.hexColor:"var(--primaria)";return e.jsxs("div",{className:"flex items-center gap-1.5 py-1 px-2 border border-solid rounded-xl pulse group cursor-pointer",style:{borderColor:x},role:"button",tabIndex:0,onClick:()=>b(o.id),children:[e.jsx(r,{className:"w-4 h-4",style:{color:x}}),e.jsx("span",{children:h}),e.jsx("span",{className:"group-hover:block hidden text-red-500",children:e.jsx(X,{size:18})})]},o.id)})})]})]})}function te(){const{activeColapse:i,setActiveColapse:u}=y(),{language:s}=A();return e.jsxs("div",{className:`collapse collapse-arrow shadow-md border min-h-[54px] ${i==="funil"?"":"bg-base-200"}`,children:[e.jsx("input",{type:"radio",name:"my-accordion-2",checked:i==="funil",onChange:()=>{u("funil")}}),e.jsx("div",{className:"collapse-title text-xl font-bold",children:s.funilConfig}),e.jsx("div",{className:"collapse-content",children:e.jsx("div",{className:"gap-2 h-full overflow-y-auto",children:e.jsx(ae,{})})})]})}function Se(){const{model:i,activeFollowUp:u,activeColapse:s,setActiveFollowUp:m,validateFollowUp:n,setResetDefaultFollowUp:t}=y(),{createFollowUp:l,editFollowUp:p}=V(),{clearAcao:o}=W(),{open:c}=_(),{language:r}=A();g.useEffect(()=>()=>o(),[]);const h=async()=>{const{success:x,message:j}=n();if(!x){k({type:"Error",message:j,position:"top-right"});return}i==="Create"?l(u):p(u),k({type:"Success",message:i==="Create"?r.followUpCreatedSuccess:r.followUpEditedSuccess,position:"top-right"}),t(),c(e.jsx(I,{}))};return e.jsxs("div",{className:"w-[800px] max-h-[99.5vh] overflow-y-auto flex flex-col gap-4",children:[e.jsxs(H,{children:[i==="Create"?r.create:r.edit," ",r.followUp]}),e.jsxs("label",{className:"form-control w-full",children:[e.jsx("div",{className:"label !pb-[1px]",children:e.jsx(T,{children:r.nameFollowUp})}),e.jsx("input",{type:"text",placeholder:r.insertNameFollowUp,className:"input input-bordered w-full input-sm",value:u.nome,onChange:x=>m("nome",x.target.value)})]}),e.jsx(te,{}),e.jsx(Z,{}),e.jsx(Y,{acaoModel:"useAcaoFollowUp",placement:"right",openCollapse:s==="script"}),e.jsx(ee,{}),e.jsxs("div",{className:"flex justify-between pt-4 resize-none",children:[e.jsx(C,{name:r.cancel,funcao:()=>{t(),c(e.jsx(I,{}))}}),e.jsx(C,{name:i==="Create"?r.create:r.edit,funcao:h})]})]})}export{Se as default};
