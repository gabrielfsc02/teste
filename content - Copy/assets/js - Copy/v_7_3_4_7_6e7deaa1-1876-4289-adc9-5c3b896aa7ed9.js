import{a as _,b as He}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed4.js";import{r as ze}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed5.js";const K=Object.create(null);K.open="0";K.close="1";K.ping="2";K.pong="3";K.message="4";K.upgrade="5";K.noop="6";const yt=Object.create(null);Object.keys(K).forEach(e=>{yt[K[e]]=e});const Ft={type:"error",data:"parser error"},we=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ve=typeof ArrayBuffer=="function",_e=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Kt=({type:e,data:t},n,s)=>we&&t instanceof Blob?n?s(t):re(t,s):ve&&(t instanceof ArrayBuffer||_e(t))?n?s(t):re(new Blob([t]),s):s(K[e]+(t||"")),re=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function oe(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Bt;function Ye(e,t){if(we&&e.data instanceof Blob)return e.data.arrayBuffer().then(oe).then(t);if(ve&&(e.data instanceof ArrayBuffer||_e(e.data)))return t(oe(e.data));Kt(e,!1,n=>{Bt||(Bt=new TextEncoder),t(Bt.encode(n))})}const ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ut=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<ce.length;e++)ut[ce.charCodeAt(e)]=e;const Ke=e=>{let t=e.length*.75,n=e.length,s,i=0,r,o,c,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const f=new ArrayBuffer(t),l=new Uint8Array(f);for(s=0;s<n;s+=4)r=ut[e.charCodeAt(s)],o=ut[e.charCodeAt(s+1)],c=ut[e.charCodeAt(s+2)],a=ut[e.charCodeAt(s+3)],l[i++]=r<<2|o>>4,l[i++]=(o&15)<<4|c>>2,l[i++]=(c&3)<<6|a&63;return f},Xe=typeof ArrayBuffer=="function",Xt=(e,t)=>{if(typeof e!="string")return{type:"message",data:be(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:je(e.substring(1),t)}:yt[n]?e.length>1?{type:yt[n],data:e.substring(1)}:{type:yt[n]}:Ft},je=(e,t)=>{if(Xe){const n=Ke(e);return be(n,t)}else return{base64:!0,data:e}},be=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},xe="",Je=(e,t)=>{const n=e.length,s=new Array(n);let i=0;e.forEach((r,o)=>{Kt(r,!1,c=>{s[o]=c,++i===n&&t(s.join(xe))})})},Qe=(e,t)=>{const n=e.split(xe),s=[];for(let i=0;i<n.length;i++){const r=Xt(n[i],t);if(s.push(r),r.type==="error")break}return s};function Ge(){return new TransformStream({transform(e,t){Ye(e,n=>{const s=n.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Lt;function pt(e){return e.reduce((t,n)=>t+n.length,0)}function mt(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)n[i]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function Ze(e,t){Lt||(Lt=new TextDecoder);const n=[];let s=0,i=-1,r=!1;return new TransformStream({transform(o,c){for(n.push(o);;){if(s===0){if(pt(n)<1)break;const a=mt(n,1);r=(a[0]&128)===128,i=a[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(pt(n)<2)break;const a=mt(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),s=3}else if(s===2){if(pt(n)<8)break;const a=mt(n,8),f=new DataView(a.buffer,a.byteOffset,a.length),l=f.getUint32(0);if(l>Math.pow(2,21)-1){c.enqueue(Ft);break}i=l*Math.pow(2,32)+f.getUint32(4),s=3}else{if(pt(n)<i)break;const a=mt(n,i);c.enqueue(Xt(r?a:Lt.decode(a),t)),s=0}if(i===0||i>e){c.enqueue(Ft);break}}}})}const Ee=4;function B(e){if(e)return tn(e)}function tn(e){for(var t in B.prototype)e[t]=B.prototype[t];return e}B.prototype.on=B.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};B.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};B.prototype.off=B.prototype.removeListener=B.prototype.removeAllListeners=B.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,i=0;i<n.length;i++)if(s=n[i],s===t||s.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};B.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,i=n.length;s<i;++s)n[s].apply(this,t)}return this};B.prototype.emitReserved=B.prototype.emit;B.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};B.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ct=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),$=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),en="arraybuffer";function Re(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const nn=$.setTimeout,sn=$.clearTimeout;function kt(e,t){t.useNativeTimers?(e.setTimeoutFn=nn.bind($),e.clearTimeoutFn=sn.bind($)):(e.setTimeoutFn=$.setTimeout.bind($),e.clearTimeoutFn=$.clearTimeout.bind($))}const rn=1.33;function on(e){return typeof e=="string"?cn(e):Math.ceil((e.byteLength||e.size)*rn)}function cn(e){let t=0,n=0;for(let s=0,i=e.length;s<i;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function Ae(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function an(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function ln(e){let t={},n=e.split("&");for(let s=0,i=n.length;s<i;s++){let r=n[s].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class fn extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class jt extends B{constructor(t){super(),this.writable=!1,kt(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new fn(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Xt(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=an(t);return n.length?"?"+n:""}}class un extends jt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Qe(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Je(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Ae()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Ce=!1;try{Ce=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const hn=Ce;function dn(){}class pn extends un{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class z extends B{constructor(t,n,s){super(),this.createRequest=t,kt(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=Re(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=z.requestsCount++,z.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=dn,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete z.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}z.requestsCount=0;z.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ae);else if(typeof addEventListener=="function"){const e="onpagehide"in $?"pagehide":"unload";addEventListener(e,ae,!1)}}function ae(){for(let e in z.requests)z.requests.hasOwnProperty(e)&&z.requests[e].abort()}const mn=function(){const e=ke({xdomain:!1});return e&&e.responseType!==null}();class gn extends pn{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=mn&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new z(ke,this.uri(),t)}}function ke(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||hn))return new XMLHttpRequest}catch{}if(!t)try{return new $[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Oe=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yn extends jt{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=Oe?{}:Re(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;Kt(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&Ct(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Ae()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Pt=$.WebSocket||$.MozWebSocket;class wn extends yn{createSocket(t,n,s){return Oe?new Pt(t,n,s):n?new Pt(t,n):new Pt(t)}doWrite(t,n){this.ws.send(n)}}class vn extends jt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=Ze(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),i=Ge();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:c,value:a})=>{c||(this.onPacket(a),r())}).catch(c=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;this._writer.write(s).then(()=>{i&&Ct(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const _n={websocket:wn,webtransport:vn,polling:gn},bn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,xn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function qt(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let i=bn.exec(e||""),r={},o=14;for(;o--;)r[xn[o]]=i[o]||"";return n!=-1&&s!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=En(r,r.path),r.queryKey=Rn(r,r.query),r}function En(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function Rn(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(n[i]=r)}),n}const It=typeof addEventListener=="function"&&typeof removeEventListener=="function",wt=[];It&&addEventListener("offline",()=>{wt.forEach(e=>e())},!1);class G extends B{constructor(t,n){if(super(),this.binaryType=en,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=qt(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=qt(n.host).host);kt(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ln(this.opts.query)),It&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Ee,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&G.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",G.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(n+=on(i)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ct(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,i){if(typeof n=="function"&&(i=n,n=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:t,data:n,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(G.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),It&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=wt.indexOf(this._offlineEventListener);s!==-1&&wt.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}G.protocol=Ee;class An extends G{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;G.priorWebsocketSuccess=!1;const i=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!s)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;G.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(l(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function r(){s||(s=!0,l(),n.close(),n=null)}const o=d=>{const p=new Error("probe error: "+d);p.transport=n.name,r(),this.emitReserved("upgradeError",p)};function c(){o("transport closed")}function a(){o("socket closed")}function f(d){n&&d.name!==n.name&&r()}const l=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",c),this.off("close",a),this.off("upgrading",f)};n.once("open",i),n.once("error",o),n.once("close",c),this.once("close",a),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let Cn=class extends An{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>_n[i]).filter(i=>!!i)),super(t,s)}};function kn(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=qt(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+t,s.href=s.protocol+"://"+r+(n&&n.port===s.port?"":":"+s.port),s}const On=typeof ArrayBuffer=="function",Tn=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Te=Object.prototype.toString,Sn=typeof Blob=="function"||typeof Blob<"u"&&Te.call(Blob)==="[object BlobConstructor]",Bn=typeof File=="function"||typeof File<"u"&&Te.call(File)==="[object FileConstructor]";function Jt(e){return On&&(e instanceof ArrayBuffer||Tn(e))||Sn&&e instanceof Blob||Bn&&e instanceof File}function vt(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(vt(e[n]))return!0;return!1}if(Jt(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return vt(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&vt(e[n]))return!0;return!1}function Ln(e){const t=[],n=e.data,s=e;return s.data=Vt(n,t),s.attachments=t.length,{packet:s,buffers:t}}function Vt(e,t){if(!e)return e;if(Jt(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=Vt(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=Vt(e[s],t));return n}return e}function Pn(e,t){return e.data=$t(e.data,t),delete e.attachments,e}function $t(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=$t(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=$t(e[n],t));return e}const Nn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Dn=5;var E;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(E||(E={}));class Mn{constructor(t){this.replacer=t}encode(t){return(t.type===E.EVENT||t.type===E.ACK)&&vt(t)?this.encodeAsBinary({type:t.type===E.EVENT?E.BINARY_EVENT:E.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===E.BINARY_EVENT||t.type===E.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Ln(t),s=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(s),i}}function le(e){return Object.prototype.toString.call(e)==="[object Object]"}class Qt extends B{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===E.BINARY_EVENT;s||n.type===E.BINARY_ACK?(n.type=s?E.EVENT:E.ACK,this.reconstructor=new Fn(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Jt(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(E[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===E.BINARY_EVENT||s.type===E.BINARY_ACK){const r=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(r,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(n+1)==="/"){const r=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(r,n)}else s.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const r=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}s.id=Number(t.substring(r,n+1))}if(t.charAt(++n)){const r=this.tryParse(t.substr(n));if(Qt.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case E.CONNECT:return le(n);case E.DISCONNECT:return n===void 0;case E.CONNECT_ERROR:return typeof n=="string"||le(n);case E.EVENT:case E.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Nn.indexOf(n[0])===-1);case E.ACK:case E.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Fn{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Pn(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const qn=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Qt,Encoder:Mn,get PacketType(){return E},protocol:Dn},Symbol.toStringTag,{value:"Module"}));function H(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const In=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Se extends B{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[H(t,"open",this.onopen.bind(this)),H(t,"packet",this.onpacket.bind(this)),H(t,"error",this.onerror.bind(this)),H(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,i,r;if(In.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:E.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const l=this.ids++,d=n.pop();this._registerAckCallback(l,d),o.id=l}const c=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!c||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},i),o=(...c)=>{this.io.clearTimeoutFn(r),n.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((s,i)=>{const r=(o,c)=>o?i(o):s(c);r.withError=!0,n.push(r),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:E.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case E.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case E.EVENT:case E.BINARY_EVENT:this.onevent(t);break;case E.ACK:case E.BINARY_ACK:this.onack(t);break;case E.DISCONNECT:this.ondisconnect();break;case E.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...i){s||(s=!0,n.packet({type:E.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:E.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function ot(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ot.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};ot.prototype.reset=function(){this.attempts=0};ot.prototype.setMin=function(e){this.ms=e};ot.prototype.setMax=function(e){this.max=e};ot.prototype.setJitter=function(e){this.jitter=e};class Ut extends B{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,kt(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ot({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||qn;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Cn(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=H(n,"open",function(){s.onopen(),t&&t()}),r=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=H(n,"error",r);if(this._timeout!==!1){const c=this._timeout,a=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),n.close()},c);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(H(t,"ping",this.onping.bind(this)),H(t,"data",this.ondata.bind(this)),H(t,"error",this.onerror.bind(this)),H(t,"close",this.onclose.bind(this)),H(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Ct(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Se(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ft={};function Nt(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=kn(e,t.path||"/socket.io"),s=n.source,i=n.id,r=n.path,o=ft[i]&&r in ft[i].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return c?a=new Ut(s,t):(ft[i]||(ft[i]=new Ut(s,t)),a=ft[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Nt,{Manager:Ut,Socket:Se,io:Nt,connect:Nt});const J=new Uint32Array(65536),Vn=(e,t)=>{const n=e.length,s=t.length,i=1<<n-1;let r=-1,o=0,c=n,a=n;for(;a--;)J[e.charCodeAt(a)]|=1<<a;for(a=0;a<s;a++){let f=J[t.charCodeAt(a)];const l=f|o;f|=(f&r)+r^r,o|=~(f|r),r&=f,o&i&&c++,r&i&&c--,o=o<<1|1,r=r<<1|~(l|o),o&=l}for(a=n;a--;)J[e.charCodeAt(a)]=0;return c},$n=(e,t)=>{const n=t.length,s=e.length,i=[],r=[],o=Math.ceil(n/32),c=Math.ceil(s/32);for(let h=0;h<o;h++)r[h]=-1,i[h]=0;let a=0;for(;a<c-1;a++){let h=0,g=-1;const v=a*32,y=Math.min(32,s)+v;for(let m=v;m<y;m++)J[e.charCodeAt(m)]|=1<<m;for(let m=0;m<n;m++){const w=J[t.charCodeAt(m)],b=r[m/32|0]>>>m&1,x=i[m/32|0]>>>m&1,k=w|h,R=((w|x)&g)+g^g|w|x;let A=h|~(R|g),S=g&R;A>>>31^b&&(r[m/32|0]^=1<<m),S>>>31^x&&(i[m/32|0]^=1<<m),A=A<<1|b,S=S<<1|x,g=S|~(k|A),h=A&k}for(let m=v;m<y;m++)J[e.charCodeAt(m)]=0}let f=0,l=-1;const d=a*32,p=Math.min(32,s-d)+d;for(let h=d;h<p;h++)J[e.charCodeAt(h)]|=1<<h;let u=s;for(let h=0;h<n;h++){const g=J[t.charCodeAt(h)],v=r[h/32|0]>>>h&1,y=i[h/32|0]>>>h&1,m=g|f,w=((g|y)&l)+l^l|g|y;let b=f|~(w|l),x=l&w;u+=b>>>s-1&1,u-=x>>>s-1&1,b>>>31^v&&(r[h/32|0]^=1<<h),x>>>31^y&&(i[h/32|0]^=1<<h),b=b<<1|v,x=x<<1|y,l=x|~(m|b),f=b&m}for(let h=d;h<p;h++)J[e.charCodeAt(h)]=0;return u},Us=(e,t)=>{if(e.length<t.length){const n=t;t=e,e=n}return t.length===0?e.length:e.length<=32?Vn(e,t):$n(e,t)};function Ot(){return typeof window<"u"}function ct(e){return Be(e)?(e.nodeName||"").toLowerCase():"#document"}function V(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function j(e){var t;return(t=(Be(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Be(e){return Ot()?e instanceof Node||e instanceof V(e).Node:!1}function q(e){return Ot()?e instanceof Element||e instanceof V(e).Element:!1}function X(e){return Ot()?e instanceof HTMLElement||e instanceof V(e).HTMLElement:!1}function fe(e){return!Ot()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof V(e).ShadowRoot}function dt(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=U(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(i)}function Un(e){return["table","td","th"].includes(ct(e))}function Tt(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Gt(e){const t=Zt(),n=q(e)?U(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function Wn(e){let t=Z(e);for(;X(t)&&!rt(t);){if(Gt(t))return t;if(Tt(t))return null;t=Z(t)}return null}function Zt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rt(e){return["html","body","#document"].includes(ct(e))}function U(e){return V(e).getComputedStyle(e)}function St(e){return q(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Z(e){if(ct(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fe(e)&&e.host||j(e);return fe(t)?t.host:t}function Le(e){const t=Z(e);return rt(t)?e.ownerDocument?e.ownerDocument.body:e.body:X(t)&&dt(t)?t:Le(t)}function ht(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Le(e),r=i===((s=e.ownerDocument)==null?void 0:s.body),o=V(i);if(r){const c=Wt(o);return t.concat(o,o.visualViewport||[],dt(i)?i:[],c&&n?ht(c):[])}return t.concat(i,ht(i,[],n))}function Wt(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const tt=Math.min,I=Math.max,bt=Math.round,gt=Math.floor,Y=e=>({x:e,y:e}),Hn={left:"right",right:"left",bottom:"top",top:"bottom"},zn={start:"end",end:"start"};function Ht(e,t,n){return I(e,tt(t,n))}function at(e,t){return typeof e=="function"?e(t):e}function et(e){return e.split("-")[0]}function lt(e){return e.split("-")[1]}function Pe(e){return e==="x"?"y":"x"}function te(e){return e==="y"?"height":"width"}function nt(e){return["top","bottom"].includes(et(e))?"y":"x"}function ee(e){return Pe(nt(e))}function Yn(e,t,n){n===void 0&&(n=!1);const s=lt(e),i=ee(e),r=te(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=xt(o)),[o,xt(o)]}function Kn(e){const t=xt(e);return[zt(e),t,zt(t)]}function zt(e){return e.replace(/start|end/g,t=>zn[t])}function Xn(e,t,n){const s=["left","right"],i=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:s:t?s:i;case"left":case"right":return t?r:o;default:return[]}}function jn(e,t,n,s){const i=lt(e);let r=Xn(et(e),n==="start",s);return i&&(r=r.map(o=>o+"-"+i),t&&(r=r.concat(r.map(zt)))),r}function xt(e){return e.replace(/left|right|bottom|top/g,t=>Hn[t])}function Jn(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ne(e){return typeof e!="number"?Jn(e):{top:e,right:e,bottom:e,left:e}}function Et(e){const{x:t,y:n,width:s,height:i}=e;return{width:s,height:i,top:n,left:t,right:t+s,bottom:n+i,x:t,y:n}}function ue(e,t,n){let{reference:s,floating:i}=e;const r=nt(t),o=ee(t),c=te(o),a=et(t),f=r==="y",l=s.x+s.width/2-i.width/2,d=s.y+s.height/2-i.height/2,p=s[c]/2-i[c]/2;let u;switch(a){case"top":u={x:l,y:s.y-i.height};break;case"bottom":u={x:l,y:s.y+s.height};break;case"right":u={x:s.x+s.width,y:d};break;case"left":u={x:s.x-i.width,y:d};break;default:u={x:s.x,y:s.y}}switch(lt(t)){case"start":u[o]-=p*(n&&f?-1:1);break;case"end":u[o]+=p*(n&&f?-1:1);break}return u}const Qn=async(e,t,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:o}=n,c=r.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:l,y:d}=ue(f,s,a),p=s,u={},h=0;for(let g=0;g<c.length;g++){const{name:v,fn:y}=c[g],{x:m,y:w,data:b,reset:x}=await y({x:l,y:d,initialPlacement:s,placement:p,strategy:i,middlewareData:u,rects:f,platform:o,elements:{reference:e,floating:t}});l=m??l,d=w??d,u={...u,[v]:{...u[v],...b}},x&&h<=50&&(h++,typeof x=="object"&&(x.placement&&(p=x.placement),x.rects&&(f=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:l,y:d}=ue(f,p,a)),g=-1)}return{x:l,y:d,placement:p,strategy:i,middlewareData:u}};async function ne(e,t){var n;t===void 0&&(t={});const{x:s,y:i,platform:r,rects:o,elements:c,strategy:a}=e,{boundary:f="clippingAncestors",rootBoundary:l="viewport",elementContext:d="floating",altBoundary:p=!1,padding:u=0}=at(t,e),h=Ne(u),v=c[p?d==="floating"?"reference":"floating":d],y=Et(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(v)))==null||n?v:v.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:f,rootBoundary:l,strategy:a})),m=d==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),b=await(r.isElement==null?void 0:r.isElement(w))?await(r.getScale==null?void 0:r.getScale(w))||{x:1,y:1}:{x:1,y:1},x=Et(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:m,offsetParent:w,strategy:a}):m);return{top:(y.top-x.top+h.top)/b.y,bottom:(x.bottom-y.bottom+h.bottom)/b.y,left:(y.left-x.left+h.left)/b.x,right:(x.right-y.right+h.right)/b.x}}const Gn=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:i,rects:r,platform:o,elements:c,middlewareData:a}=t,{element:f,padding:l=0}=at(e,t)||{};if(f==null)return{};const d=Ne(l),p={x:n,y:s},u=ee(i),h=te(u),g=await o.getDimensions(f),v=u==="y",y=v?"top":"left",m=v?"bottom":"right",w=v?"clientHeight":"clientWidth",b=r.reference[h]+r.reference[u]-p[u]-r.floating[h],x=p[u]-r.reference[u],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let R=k?k[w]:0;(!R||!await(o.isElement==null?void 0:o.isElement(k)))&&(R=c.floating[w]||r.floating[h]);const A=b/2-x/2,S=R/2-g[h]/2-1,P=tt(d[y],S),F=tt(d[m],S),T=P,N=R-g[h]-F,O=R/2-g[h]/2+A,W=Ht(T,O,N),L=!a.arrow&&lt(i)!=null&&O!==W&&r.reference[h]/2-(O<T?P:F)-g[h]/2<0,D=L?O<T?O-T:O-N:0;return{[u]:p[u]+D,data:{[u]:W,centerOffset:O-W-D,...L&&{alignmentOffset:D}},reset:L}}}),Zn=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:i,middlewareData:r,rects:o,initialPlacement:c,platform:a,elements:f}=t,{mainAxis:l=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...v}=at(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const y=et(i),m=nt(c),w=et(c)===c,b=await(a.isRTL==null?void 0:a.isRTL(f.floating)),x=p||(w||!g?[xt(c)]:Kn(c)),k=h!=="none";!p&&k&&x.push(...jn(c,g,h,b));const R=[c,...x],A=await ne(t,v),S=[];let P=((s=r.flip)==null?void 0:s.overflows)||[];if(l&&S.push(A[y]),d){const O=Yn(i,o,b);S.push(A[O[0]],A[O[1]])}if(P=[...P,{placement:i,overflows:S}],!S.every(O=>O<=0)){var F,T;const O=(((F=r.flip)==null?void 0:F.index)||0)+1,W=R[O];if(W)return{data:{index:O,overflows:P},reset:{placement:W}};let L=(T=P.filter(D=>D.overflows[0]<=0).sort((D,C)=>D.overflows[1]-C.overflows[1])[0])==null?void 0:T.placement;if(!L)switch(u){case"bestFit":{var N;const D=(N=P.filter(C=>{if(k){const M=nt(C.placement);return M===m||M==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(M=>M>0).reduce((M,Q)=>M+Q,0)]).sort((C,M)=>C[1]-M[1])[0])==null?void 0:N[0];D&&(L=D);break}case"initialPlacement":L=c;break}if(i!==L)return{reset:{placement:L}}}return{}}}};async function ts(e,t){const{placement:n,platform:s,elements:i}=e,r=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=et(n),c=lt(n),a=nt(n)==="y",f=["left","top"].includes(o)?-1:1,l=r&&a?-1:1,d=at(t,e);let{mainAxis:p,crossAxis:u,alignmentAxis:h}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return c&&typeof h=="number"&&(u=c==="end"?h*-1:h),a?{x:u*l,y:p*f}:{x:p*f,y:u*l}}const es=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:i,y:r,placement:o,middlewareData:c}=t,a=await ts(t,e);return o===((n=c.offset)==null?void 0:n.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:i+a.x,y:r+a.y,data:{...a,placement:o}}}}},ns=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:i}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:c={fn:v=>{let{x:y,y:m}=v;return{x:y,y:m}}},...a}=at(e,t),f={x:n,y:s},l=await ne(t,a),d=nt(et(i)),p=Pe(d);let u=f[p],h=f[d];if(r){const v=p==="y"?"top":"left",y=p==="y"?"bottom":"right",m=u+l[v],w=u-l[y];u=Ht(m,u,w)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",m=h+l[v],w=h-l[y];h=Ht(m,h,w)}const g=c.fn({...t,[p]:u,[d]:h});return{...g,data:{x:g.x-n,y:g.y-s,enabled:{[p]:r,[d]:o}}}}}},ss=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:i,rects:r,platform:o,elements:c}=t,{apply:a=()=>{},...f}=at(e,t),l=await ne(t,f),d=et(i),p=lt(i),u=nt(i)==="y",{width:h,height:g}=r.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=p===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(y=d,v=p==="end"?"top":"bottom");const m=g-l.top-l.bottom,w=h-l.left-l.right,b=tt(g-l[v],m),x=tt(h-l[y],w),k=!t.middlewareData.shift;let R=b,A=x;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(R=m),k&&!p){const P=I(l.left,0),F=I(l.right,0),T=I(l.top,0),N=I(l.bottom,0);u?A=h-2*(P!==0||F!==0?P+F:I(l.left,l.right)):R=g-2*(T!==0||N!==0?T+N:I(l.top,l.bottom))}await a({...t,availableWidth:A,availableHeight:R});const S=await o.getDimensions(c.floating);return h!==S.width||g!==S.height?{reset:{rects:!0}}:{}}}};function De(e){const t=U(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=X(e),r=i?e.offsetWidth:n,o=i?e.offsetHeight:s,c=bt(n)!==r||bt(s)!==o;return c&&(n=r,s=o),{width:n,height:s,$:c}}function se(e){return q(e)?e:e.contextElement}function it(e){const t=se(e);if(!X(t))return Y(1);const n=t.getBoundingClientRect(),{width:s,height:i,$:r}=De(t);let o=(r?bt(n.width):n.width)/s,c=(r?bt(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const is=Y(0);function Me(e){const t=V(e);return!Zt()||!t.visualViewport?is:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rs(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==V(e)?!1:t}function st(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=se(e);let o=Y(1);t&&(s?q(s)&&(o=it(s)):o=it(e));const c=rs(r,n,s)?Me(r):Y(0);let a=(i.left+c.x)/o.x,f=(i.top+c.y)/o.y,l=i.width/o.x,d=i.height/o.y;if(r){const p=V(r),u=s&&q(s)?V(s):s;let h=p,g=Wt(h);for(;g&&s&&u!==h;){const v=it(g),y=g.getBoundingClientRect(),m=U(g),w=y.left+(g.clientLeft+parseFloat(m.paddingLeft))*v.x,b=y.top+(g.clientTop+parseFloat(m.paddingTop))*v.y;a*=v.x,f*=v.y,l*=v.x,d*=v.y,a+=w,f+=b,h=V(g),g=Wt(h)}}return Et({width:l,height:d,x:a,y:f})}function ie(e,t){const n=St(e).scrollLeft;return t?t.left+n:st(j(e)).left+n}function Fe(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=s.left+t.scrollLeft-(n?0:ie(e,s)),r=s.top+t.scrollTop;return{x:i,y:r}}function os(e){let{elements:t,rect:n,offsetParent:s,strategy:i}=e;const r=i==="fixed",o=j(s),c=t?Tt(t.floating):!1;if(s===o||c&&r)return n;let a={scrollLeft:0,scrollTop:0},f=Y(1);const l=Y(0),d=X(s);if((d||!d&&!r)&&((ct(s)!=="body"||dt(o))&&(a=St(s)),X(s))){const u=st(s);f=it(s),l.x=u.x+s.clientLeft,l.y=u.y+s.clientTop}const p=o&&!d&&!r?Fe(o,a,!0):Y(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-a.scrollLeft*f.x+l.x+p.x,y:n.y*f.y-a.scrollTop*f.y+l.y+p.y}}function cs(e){return Array.from(e.getClientRects())}function as(e){const t=j(e),n=St(e),s=e.ownerDocument.body,i=I(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=I(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+ie(e);const c=-n.scrollTop;return U(s).direction==="rtl"&&(o+=I(t.clientWidth,s.clientWidth)-i),{width:i,height:r,x:o,y:c}}function ls(e,t){const n=V(e),s=j(e),i=n.visualViewport;let r=s.clientWidth,o=s.clientHeight,c=0,a=0;if(i){r=i.width,o=i.height;const f=Zt();(!f||f&&t==="fixed")&&(c=i.offsetLeft,a=i.offsetTop)}return{width:r,height:o,x:c,y:a}}function fs(e,t){const n=st(e,!0,t==="fixed"),s=n.top+e.clientTop,i=n.left+e.clientLeft,r=X(e)?it(e):Y(1),o=e.clientWidth*r.x,c=e.clientHeight*r.y,a=i*r.x,f=s*r.y;return{width:o,height:c,x:a,y:f}}function he(e,t,n){let s;if(t==="viewport")s=ls(e,n);else if(t==="document")s=as(j(e));else if(q(t))s=fs(t,n);else{const i=Me(e);s={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Et(s)}function qe(e,t){const n=Z(e);return n===t||!q(n)||rt(n)?!1:U(n).position==="fixed"||qe(n,t)}function us(e,t){const n=t.get(e);if(n)return n;let s=ht(e,[],!1).filter(c=>q(c)&&ct(c)!=="body"),i=null;const r=U(e).position==="fixed";let o=r?Z(e):e;for(;q(o)&&!rt(o);){const c=U(o),a=Gt(o);!a&&c.position==="fixed"&&(i=null),(r?!a&&!i:!a&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||dt(o)&&!a&&qe(e,o))?s=s.filter(l=>l!==o):i=c,o=Z(o)}return t.set(e,s),s}function hs(e){let{element:t,boundary:n,rootBoundary:s,strategy:i}=e;const o=[...n==="clippingAncestors"?Tt(t)?[]:us(t,this._c):[].concat(n),s],c=o[0],a=o.reduce((f,l)=>{const d=he(t,l,i);return f.top=I(d.top,f.top),f.right=tt(d.right,f.right),f.bottom=tt(d.bottom,f.bottom),f.left=I(d.left,f.left),f},he(t,c,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function ds(e){const{width:t,height:n}=De(e);return{width:t,height:n}}function ps(e,t,n){const s=X(t),i=j(t),r=n==="fixed",o=st(e,!0,r,t);let c={scrollLeft:0,scrollTop:0};const a=Y(0);if(s||!s&&!r)if((ct(t)!=="body"||dt(i))&&(c=St(t)),s){const p=st(t,!0,r,t);a.x=p.x+t.clientLeft,a.y=p.y+t.clientTop}else i&&(a.x=ie(i));const f=i&&!s&&!r?Fe(i,c):Y(0),l=o.left+c.scrollLeft-a.x-f.x,d=o.top+c.scrollTop-a.y-f.y;return{x:l,y:d,width:o.width,height:o.height}}function Dt(e){return U(e).position==="static"}function de(e,t){if(!X(e)||U(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return j(e)===n&&(n=n.ownerDocument.body),n}function Ie(e,t){const n=V(e);if(Tt(e))return n;if(!X(e)){let i=Z(e);for(;i&&!rt(i);){if(q(i)&&!Dt(i))return i;i=Z(i)}return n}let s=de(e,t);for(;s&&Un(s)&&Dt(s);)s=de(s,t);return s&&rt(s)&&Dt(s)&&!Gt(s)?n:s||Wn(e)||n}const ms=async function(e){const t=this.getOffsetParent||Ie,n=this.getDimensions,s=await n(e.floating);return{reference:ps(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function gs(e){return U(e).direction==="rtl"}const ys={convertOffsetParentRelativeRectToViewportRelativeRect:os,getDocumentElement:j,getClippingRect:hs,getOffsetParent:Ie,getElementRects:ms,getClientRects:cs,getDimensions:ds,getScale:it,isElement:q,isRTL:gs};function Ve(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ws(e,t){let n=null,s;const i=j(e);function r(){var c;clearTimeout(s),(c=n)==null||c.disconnect(),n=null}function o(c,a){c===void 0&&(c=!1),a===void 0&&(a=1),r();const f=e.getBoundingClientRect(),{left:l,top:d,width:p,height:u}=f;if(c||t(),!p||!u)return;const h=gt(d),g=gt(i.clientWidth-(l+p)),v=gt(i.clientHeight-(d+u)),y=gt(l),w={rootMargin:-h+"px "+-g+"px "+-v+"px "+-y+"px",threshold:I(0,tt(1,a))||1};let b=!0;function x(k){const R=k[0].intersectionRatio;if(R!==a){if(!b)return o();R?o(!1,R):s=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!Ve(f,e.getBoundingClientRect())&&o(),b=!1}try{n=new IntersectionObserver(x,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,w)}n.observe(e)}return o(!0),r}function Ws(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:a=!1}=s,f=se(e),l=i||r?[...f?ht(f):[],...ht(t)]:[];l.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),r&&y.addEventListener("resize",n)});const d=f&&c?ws(f,n):null;let p=-1,u=null;o&&(u=new ResizeObserver(y=>{let[m]=y;m&&m.target===f&&u&&(u.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=u)==null||w.observe(t)})),n()}),f&&!a&&u.observe(f),u.observe(t));let h,g=a?st(e):null;a&&v();function v(){const y=st(e);g&&!Ve(g,y)&&n(),g=y,h=requestAnimationFrame(v)}return n(),()=>{var y;l.forEach(m=>{i&&m.removeEventListener("scroll",n),r&&m.removeEventListener("resize",n)}),d==null||d(),(y=u)==null||y.disconnect(),u=null,a&&cancelAnimationFrame(h)}}const vs=es,_s=ns,bs=Zn,xs=ss,pe=Gn,Es=(e,t,n)=>{const s=new Map,i={platform:ys,...n},r={...i.platform,_c:s};return Qn(e,t,{...i,platform:r})};var _t=typeof document<"u"?_.useLayoutEffect:_.useEffect;function Rt(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Rt(e[s],t[s]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){const r=i[s];if(!(r==="_owner"&&e.$$typeof)&&!Rt(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function $e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function me(e,t){const n=$e(e);return Math.round(t*n)/n}function Mt(e){const t=_.useRef(e);return _t(()=>{t.current=e}),t}function Rs(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:r,floating:o}={},transform:c=!0,whileElementsMounted:a,open:f}=e,[l,d]=_.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,u]=_.useState(s);Rt(p,s)||u(s);const[h,g]=_.useState(null),[v,y]=_.useState(null),m=_.useCallback(C=>{C!==k.current&&(k.current=C,g(C))},[]),w=_.useCallback(C=>{C!==R.current&&(R.current=C,y(C))},[]),b=r||h,x=o||v,k=_.useRef(null),R=_.useRef(null),A=_.useRef(l),S=a!=null,P=Mt(a),F=Mt(i),T=Mt(f),N=_.useCallback(()=>{if(!k.current||!R.current)return;const C={placement:t,strategy:n,middleware:p};F.current&&(C.platform=F.current),Es(k.current,R.current,C).then(M=>{const Q={...M,isPositioned:T.current!==!1};O.current&&!Rt(A.current,Q)&&(A.current=Q,ze.flushSync(()=>{d(Q)}))})},[p,t,n,F,T]);_t(()=>{f===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(C=>({...C,isPositioned:!1})))},[f]);const O=_.useRef(!1);_t(()=>(O.current=!0,()=>{O.current=!1}),[]),_t(()=>{if(b&&(k.current=b),x&&(R.current=x),b&&x){if(P.current)return P.current(b,x,N);N()}},[b,x,N,P,S]);const W=_.useMemo(()=>({reference:k,floating:R,setReference:m,setFloating:w}),[m,w]),L=_.useMemo(()=>({reference:b,floating:x}),[b,x]),D=_.useMemo(()=>{const C={position:n,left:0,top:0};if(!L.floating)return C;const M=me(L.floating,l.x),Q=me(L.floating,l.y);return c?{...C,transform:"translate("+M+"px, "+Q+"px)",...$e(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:Q}},[n,c,L.floating,l.x,l.y]);return _.useMemo(()=>({...l,update:N,refs:W,elements:L,floatingStyles:D}),[l,N,W,L,D])}const As=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:i}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?pe({element:s.current,padding:i}).fn(n):{}:s?pe({element:s,padding:i}).fn(n):{}}}},Hs=(e,t)=>({...vs(e),options:[e,t]}),zs=(e,t)=>({..._s(e),options:[e,t]}),Ys=(e,t)=>({...bs(e),options:[e,t]}),Ks=(e,t)=>({...xs(e),options:[e,t]}),Xs=(e,t)=>({...As(e),options:[e,t]}),Ue={...He},Cs=Ue.useInsertionEffect,ks=Cs||(e=>e());function Os(e){const t=_.useRef(()=>{});return ks(()=>{t.current=e}),_.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t.current==null?void 0:t.current(...s)},[])}var At=typeof document<"u"?_.useLayoutEffect:_.useEffect;function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Yt.apply(this,arguments)}let ge=!1,Ts=0;const ye=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ts++;function Ss(){const[e,t]=_.useState(()=>ge?ye():void 0);return At(()=>{e==null&&t(ye())},[]),_.useEffect(()=>{ge=!0},[]),e}const Bs=Ue.useId,We=Bs||Ss,js=_.forwardRef(function(t,n){const{context:{placement:s,elements:{floating:i},middlewareData:{arrow:r,shift:o}},width:c=14,height:a=7,tipRadius:f=0,strokeWidth:l=0,staticOffset:d,stroke:p,d:u,style:{transform:h,...g}={},...v}=t,y=We(),[m,w]=_.useState(!1);if(At(()=>{if(!i)return;U(i).direction==="rtl"&&w(!0)},[i]),!i)return null;const[b,x]=s.split("-"),k=b==="top"||b==="bottom";let R=d;(k&&o!=null&&o.x||!k&&o!=null&&o.y)&&(R=null);const A=l*2,S=A/2,P=c/2*(f/-8+1),F=a/2*f/4,T=!!u,N=R&&x==="end"?"bottom":"top";let O=R&&x==="end"?"right":"left";R&&m&&(O=x==="end"?"left":"right");const W=(r==null?void 0:r.x)!=null?R||r.x:"",L=(r==null?void 0:r.y)!=null?R||r.y:"",D=u||"M0,0"+(" H"+c)+(" L"+(c-P)+","+(a-F))+(" Q"+c/2+","+a+" "+P+","+(a-F))+" Z",C={top:T?"rotate(180deg)":"",left:T?"rotate(90deg)":"rotate(-90deg)",bottom:T?"":"rotate(180deg)",right:T?"rotate(-90deg)":"rotate(90deg)"}[b];return _.createElement("svg",Yt({},v,{"aria-hidden":!0,ref:n,width:T?c:c+A,height:c,viewBox:"0 0 "+c+" "+(a>c?a:c),style:{position:"absolute",pointerEvents:"none",[O]:W,[N]:L,[b]:k||T?"100%":"calc(100% - "+A/2+"px)",transform:[C,h].filter(M=>!!M).join(" "),...g}}),A>0&&_.createElement("path",{clipPath:"url(#"+y+")",fill:"none",stroke:p,strokeWidth:A+(u?0:1),d:D}),_.createElement("path",{stroke:A&&!u?v.fill:"none",d:D}),_.createElement("clipPath",{id:y},_.createElement("rect",{x:-S,y:S*(T?-1:1),width:c+A,height:c})))});function Ls(){const e=new Map;return{emit(t,n){var s;(s=e.get(t))==null||s.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var s;e.set(t,((s=e.get(t))==null?void 0:s.filter(i=>i!==n))||[])}}}const Ps=_.createContext(null),Ns=_.createContext(null),Ds=()=>{var e;return((e=_.useContext(Ps))==null?void 0:e.id)||null},Ms=()=>_.useContext(Ns);function Fs(e){const{open:t=!1,onOpenChange:n,elements:s}=e,i=We(),r=_.useRef({}),[o]=_.useState(()=>Ls()),c=Ds()!=null,[a,f]=_.useState(s.reference),l=Os((u,h,g)=>{r.current.openEvent=u?h:void 0,o.emit("openchange",{open:u,event:h,reason:g,nested:c}),n==null||n(u,h,g)}),d=_.useMemo(()=>({setPositionReference:f}),[]),p=_.useMemo(()=>({reference:a||s.reference||null,floating:s.floating||null,domReference:s.reference}),[a,s.reference,s.floating]);return _.useMemo(()=>({dataRef:r,open:t,onOpenChange:l,elements:p,events:o,floatingId:i,refs:d}),[t,l,p,o,i,d])}function Js(e){e===void 0&&(e={});const{nodeId:t}=e,n=Fs({...e,elements:{reference:null,floating:null,...e.elements}}),s=e.rootContext||n,i=s.elements,[r,o]=_.useState(null),[c,a]=_.useState(null),l=(i==null?void 0:i.domReference)||r,d=_.useRef(null),p=Ms();At(()=>{l&&(d.current=l)},[l]);const u=Rs({...e,elements:{...i,...c&&{reference:c}}}),h=_.useCallback(w=>{const b=q(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;a(b),u.refs.setReference(b)},[u.refs]),g=_.useCallback(w=>{(q(w)||w===null)&&(d.current=w,o(w)),(q(u.refs.reference.current)||u.refs.reference.current===null||w!==null&&!q(w))&&u.refs.setReference(w)},[u.refs]),v=_.useMemo(()=>({...u.refs,setReference:g,setPositionReference:h,domReference:d}),[u.refs,g,h]),y=_.useMemo(()=>({...u.elements,domReference:l}),[u.elements,l]),m=_.useMemo(()=>({...u,...s,refs:v,elements:y,nodeId:t}),[u,v,y,t,s]);return At(()=>{s.dataRef.current.floatingContext=m;const w=p==null?void 0:p.nodesRef.current.find(b=>b.id===t);w&&(w.context=m)}),_.useMemo(()=>({...u,context:m,refs:v,elements:y}),[u,v,y,m])}var qs="Invariant failed";function Qs(e,t){if(!e)throw new Error(qs)}export{js as F,Xs as a,Ws as b,Ks as c,Us as d,Ys as f,Qs as i,Nt as l,Hs as o,zs as s,Js as u};
