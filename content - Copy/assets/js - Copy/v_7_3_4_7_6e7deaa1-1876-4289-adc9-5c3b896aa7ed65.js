import{j as a,_,I as g,ah as w,af as v,x as z}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed10.js";import{m as I,a as j,B as O,n as k,o as B}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed22.js";import{u as S,a as T,c as P}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed19.js";import{a as c}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed4.js";import{U as R}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed69.js";import{U as M,a as F}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed123.js";import{d as U}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed124.js";import{W as l,V as N}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed18.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed8.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed5.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed7.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed6.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed2.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed3.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed9.js";const D=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed118.js")),[]));function G({tabId:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(D,{tabId:e})})}const V=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed119.js")),[]));function q({id:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(V,{id:e})})}const W=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed120.js")),[]));function X({id:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(W,{id:e})})}const $=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed121.js")),[]));function J({tabId:e,aba_System:n}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx($,{tabId:e,aba_System:n})})}const H=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed122.js")),[]));function K({id:e}){return a.jsx(c.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(H,{id:e})})}async function Q(e){const n=S.getState().language,{user:d}=I.getState(),{userTabs:A}=j.getState(),{label:b}=T.getState();let s,r;if(e.type==="tab")switch(e.id){case 1:s=await l.Chat("List"),r=n.tab_all;break;case 2:s=await l.Chat("List","onlyGroups"),r=n.tab_groups;break;case 3:s=await l.Chat("List","nao-lido"),r=n.tab_unread;break;case 4:s=await l.Chat("List","1:1"),r=n.tab_1_1;break;case 5:s=await l.Chat("List",{type:"tab_atendentes",user:d}),r=n.tab_atendentes;break;default:const t=A.find(i=>i.id===e.id);s=t.chats,r=t.tag;break}else e.type==="crm"||(s=await l.Contact("List",{type:"withLabels",id:e.id}),r="Etiquetados");const C=await l.Utils("listGroupParticipants"),y=[];for(let t=0;t<s.length;t++){const i=s[t],m=await l.Utils("getContato",i.id);i.name=m.name;const f=C.find(p=>p.id===i.id);if(f)for(const p of f.participants)try{const L=await l.Utils("getContato",p.id);y.push({id:p.id,name:L.name})}catch{console.error("Contato de grupo nÃ£o capturado: ",p)}}s=s.concat(y),d.estado||(s=s.slice(0,5),g({type:"Info",message:n.modoGratuitoPermite5Contatos,position:"top-right"}));const x=new Set,h=s.filter(t=>x.has(t.id)?!1:(x.add(t.id),!0));if(h.length===0){g({type:"Error",message:n.semContatosParaExportar,position:"top-right"});return}const u={contacts:h.map(t=>({id:t.id,name:t.name})),labelName:b.nameID,tag:r};try{const t=await fetch(`${N.backend_utils}api/XLSX/exporttab`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!t.ok)throw new Error("Erro ao enviar dados para o servidor");const i=await t.json();U(i.XLSXbase64,`${b.nameID}_aba_${r}.xlsx`),g({type:"Success",message:n.exportSuccess,position:"top-right"})}catch(t){console.error("Erro ao exportar contatos:",t),g({type:"Error",message:n.erroEnvio,position:"top-right"})}}function fa({id:e,aba_System:n,type:d,name:A,color:b}){const{variaveisWA:s}=O(),{userTabs:r}=j(),C=R(),y=M(),x=F(),{open:h}=k(),{close:u}=B(),{isBusiness:t}=P(),{language:i}=S(),m=o=>{u(),h(o)},f=()=>{u(),Q({id:e,type:d})},p=()=>{u(),C()},L=[{id:1,nome:"menu_moreAba_addContact",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>m(a.jsx(G,{tabId:e}))},{id:2,nome:"menu_moreAba_importContactForEtiquet",type:"aba",aba_System:!1,isBusiness:!0,funcao:()=>m(a.jsx(K,{id:e}))},{id:3,nome:"menu_moreAba_copyContactForOtherAba",type:"aba",aba_System:!0,isBusiness:!1,funcao:()=>m(a.jsx(J,{tabId:e,aba_System:n}))},{id:4,nome:"menu_moreAba_exportAba",type:"aba",aba_System:!0,isBusiness:!1,funcao:()=>f()},{id:5,nome:"menu_moreAba_editar",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>{x(r.find(o=>o.id===e)),u()}},{id:6,nome:"menu_moreAba_remover",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>{y(r.find(o=>o.id===e)),u()}},{id:7,nome:"menu_moreAba_createTab",type:"aba",aba_System:!1,isBusiness:!1,funcao:()=>p()}],E=[{id:1,nome:"menu_moreAba_addContactLB",type:"Labels",funcao:()=>m(a.jsx(q,{id:e}))},{id:2,nome:"menu_moreAba_copyContactForOtherLB",type:"Labels",funcao:()=>m(a.jsx(X,{id:e}))},{id:3,nome:"menu_moreAba_exportLB",type:"Labels",funcao:()=>f()}];return a.jsxs("div",{children:[a.jsxs("div",{className:"flex gap-1 mx-3 pb-1 items-center",children:[a.jsx("span",{children:d==="Labels"?a.jsx(w,{size:24,style:{color:b}}):a.jsx(v,{size:24,style:{color:b}})}),a.jsx(z,{children:A})]}),a.jsx("div",{className:s.listagem.content1+"gap-1 flex flex-col",children:d==="tab"?L.map(o=>t===!1&&o.isBusiness===!0||n&&o.aba_System===!1?null:a.jsx("li",{className:"hoverShadown pulse cursor-pointer px-1 py-2",onClick:o.funcao,children:i[o.nome]},o.id)):E.map(o=>a.jsx("li",{className:"hoverShadown pulse cursor-pointer px-1 py-2",onClick:o.funcao,children:i[o.nome]},o.id))})]})}export{fa as default};
