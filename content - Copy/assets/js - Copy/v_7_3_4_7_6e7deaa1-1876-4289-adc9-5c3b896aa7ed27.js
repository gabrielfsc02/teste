import{R as c,a as r}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed10.js";import{c as g}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed7.js";const t=g(a=>({agrupamentos:[],setAgrupamentos:async e=>(await r("agrupamentos",e),a(()=>({agrupamentos:e})),chrome.runtime.sendMessage({action:"setAgrupamentos",dados:{agrupamentos:e}}),{agrupamentos:e})})),u=async a=>{t.setState({agrupamentos:a}),await r("agrupamentos",a),chrome.runtime.sendMessage({action:"agrupamentos-backup-update"})},S=a=>{const e=[...t.getState().agrupamentos];a.forEach(s=>{const o=e.findIndex(n=>n.id===s.id);o===-1?e.push(s):e[o]=s}),u(e)},i=async()=>{const a=await c("agrupamentos")||[];t.setState({agrupamentos:a})},{setAgrupamentos:m}=t.getState();chrome.runtime.onMessage.addListener(a=>{switch(a.action){case"setAgrupamentos":chrome.storage.local.get("agrupamentos",e=>{JSON.stringify(e.agrupamentos)!==JSON.stringify(t.getState().agrupamentos)&&m(e.agrupamentos)});break;case"agrupamentos-backup-update":i();break}});export{S as M,u as R,i,t as u};
