import{j as e,F as se,b7 as re,b8 as ne,b9 as oe,ba as N,ak as ie,c as ae,I as le,ab as W,K as Y}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed10.js";import{u as A}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed34.js";import{a as K,c as V}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed92.js";import{u as k}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed19.js";import{a as n}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed4.js";import{R as ce,u as de}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed5.js";import{i as P}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed9.js";import{k as ue}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed178.js";import{B as S,x as O,G as pe,D as me,m as ge,a as xe,p as fe,t as q,b as he}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed187.js";import{c as U,d as ve,e as J,a as ye,b as je,s as be,g as Ce,r as we,m as Ee}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed179.js";import{a as Ie}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed107.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed18.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed8.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed7.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed22.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed6.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed2.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed3.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed116.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed117.js";function Se(){const{language:t}=k(),{setActiveRenderCategoria:r}=K(),{pesquisar:o,setPesquisar:i}=V();return n.useEffect(()=>()=>{i("")},[]),e.jsxs("div",{className:"grid gap-2 p-2",children:[e.jsxs("div",{className:"flex gap-1 items-center ml-9",children:[e.jsx(se,{weight:"600",children:t.category}),e.jsx("span",{className:"group cursor-pointer lg:tooltip lg:tooltip-bottom before:!w-48","data-tip":t.categoryPopUp,children:e.jsx(re,{className:"h-4 w-4 group-hover:pulse"})})]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ne,{value:o,setValue:x=>i(x),placeholder:t.searchCategory}),e.jsx("span",{className:"cursor-pointer pulse lg:tooltip lg:tooltip-left","data-tip":t.createCategory,onClick:()=>r("createOrEdit"),children:e.jsx(oe,{className:"!w-[30px] !h-[30px] text-[var(--primaria)]"})})]})]})}var Ne=1e3,D=null,j="1px",De={width:j,height:j,padding:"0",position:"absolute",border:"0",clip:"rect(".concat(j,", ").concat(j,", ").concat(j,", ").concat(j,")"),overflow:"hidden",whiteSpace:"nowrap",marginTop:"-".concat(j),pointerEvents:"none"};function ze(){var t=document.createElement("div");return t.setAttribute("role","status"),Object.assign(t.style,De),document.body.append(t),t}function G(){return D===null&&(D=ze()),D}var z=null;function Q(){z!==null&&clearTimeout(z),z=null}function Re(t){G(),Q(),z=setTimeout(function(){z=null;var r=G();r.textContent=t},Ne)}function Oe(){var t;Q(),(t=D)===null||t===void 0||t.remove(),D=null}const X=Symbol("item"),R={item:{outer:40,inner:34}};function F(t){return t[X]===!0}const Z=n.createContext(null);function Te(){const t=n.useContext(Z);return P(t!==null),t}const M={type:"idle"},H={type:"dragging"},B=O({flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}),Le=O({boxSizing:"border-box",padding:"space.050",display:"flex",flexDirection:"column"}),Me=O({width:"100%",flexShrink:"0",height:`${R.item.inner}px`,boxSizing:"border-box",display:"flex",flexDirection:"row",alignContent:"center",padding:"space.050",position:"relative",borderWidth:"border.width",borderStyle:"solid",borderRadius:"8px",cursor:"grab"}),Fe=O({opacity:.4});function Pe({item:t,index:r,instanceId:o}){return{[X]:!0,item:t,index:r,instanceId:o}}const ke=n.memo(function({item:r,index:o,virtualItem:i,position:g}){const{removeCategory:x}=A(),{setEditModel:C}=V(),{language:w}=k(),{registerItem:E,instanceId:p}=Te(),[a,c]=n.useState(M),y=n.useRef(null),h=n.useRef(null);n.useEffect(()=>{const m=y.current;P(m),P(h.current);function I({source:d}){return F(d.data)&&d.data.instanceId===p&&d.data.item.id!==r.id}const T=Pe({item:r,index:o,instanceId:p});return U(E({itemId:r.id,element:m}),je({element:m,dragHandle:h.current,getInitialData:()=>T,onGenerateDragPreview({nativeSetDragImage:d}){be({nativeSetDragImage:d,getOffset:fe({x:q("space.200","16px"),y:q("space.100","8px")}),render({container:s}){return c({type:"preview",container:s}),()=>c(H)}})},onDragStart(){c(H)},onDrop(){c(M)}}),ve({element:m,canDrop:I,getIsSticky:()=>!0,getData({input:d}){return ye(T,{element:m,input:d,allowedEdges:["top","bottom"]})},onDrag({self:d}){const s=J(d.data);c(l=>l.type==="is-over"&&l.closestEdge===s?l:{type:"is-over",closestEdge:s})},onDragLeave(){c(M)},onDrop(){c(M)}}))},[p,r,o,E]);const b=()=>{ae({submit:()=>x(r.id),icon:e.jsx(N,{size:28,style:{color:r.hexColor}}),confirmText:w.confirm,content:e.jsxs(e.Fragment,{children:[w.confirmDeleteCat," ",e.jsx("strong",{style:{color:r.hexColor},children:r.name})]})})};return e.jsxs(n.Fragment,{children:[e.jsx(S,{xcss:Le,style:{position:"absolute",top:0,left:0,width:"100%",height:`${i.size}px`,boxSizing:"border-box",transform:`translateY(${i.start}px)`,zIndex:a.type==="is-over"&&a.closestEdge?1:void 0},children:e.jsxs(S,{style:{position:"relative",height:R.item.inner},"style-inject":"grid-atlassian",children:[e.jsx(pe,{ref:y,alignItems:"center",columnGap:"space.100",templateColumns:"auto 1fr auto",xcss:[Me,a.type==="dragging"&&Fe],children:e.jsx(me,{trigger:({triggerRef:m,...I})=>e.jsxs("div",{className:"flex justify-between w-full",ref:ge([h,m]),...I,style:{pointerEvents:a.type!=="idle"?"none":void 0},children:[e.jsx("span",{className:"w-5 mr-1",children:e.jsx(N,{size:20,style:{color:r.hexColor}})}),e.jsx(S,{xcss:B,children:r.name}),e.jsxs("span",{className:"flex w-[50px] justify-between",children:[e.jsx("span",{className:"pulse cursor-pointer",onClick:()=>C(r),children:e.jsx(ie,{size:20,className:"text-[var(--panel-header-icon)]"})}),e.jsx("span",{className:"pulse cursor-pointer",onClick:b,children:e.jsx(Ie,{size:20,className:"text-[var(--panel-header-icon)]"})})]})]})})}),a.type==="is-over"&&a.closestEdge&&e.jsx("div",{className:"tema-indicador",children:e.jsx(xe,{edge:a.closestEdge,gap:`${R.item.outer-R.item.inner}px`})})]})}),a.type==="preview"&&ce.createPortal(e.jsxs("div",{className:"flex justify-between w-full ml-2",children:[e.jsx("span",{className:"w-5 mr-1",children:e.jsx(N,{size:20,style:{color:r.hexColor}})}),e.jsx(S,{xcss:B,children:r.name})]}),a.container)]})}),$e=O({maxWidth:"100%",height:"100%",overflowY:"scroll"});function Ae({index:t,items:r}){return r.length===1?"only":t===0?"first":t===r.length-1?"last":"middle"}function Ve(){const t=new Map;function r({itemId:i,element:g}){return t.set(i,g),function(){t.get(i)===g&&t.delete(i)}}function o(i){return t.get(i)??null}return{register:r,getElement:o}}function _e(){const{categories:t,sortCategories:r}=A(),{pesquisar:o,setPesquisar:i}=V(),{language:g}=k(),[{items:x,lastCardMoved:C},w]=n.useState(()=>({items:t,lastCardMoved:null}));n.useEffect(()=>{w(s=>({...s,items:t}))},[t]);const E=s=>s.replace(/[\p{Emoji}\p{Extended_Pictographic}]/gu,""),p=n.useMemo(()=>x.filter(s=>{const l=E(s.name.toLowerCase()),u=E(o.toLowerCase());return l.includes(u)}),[x,o,t]),[a]=n.useState(Ve),c=n.useRef(null),y=de({count:p.length,getScrollElement:()=>c.current,estimateSize:()=>R.item.outer,overscan:2}),[h]=n.useState(()=>Symbol("instance-id")),b=n.useCallback(({startIndex:s,indexOfTarget:l,closestEdgeOfTarget:u})=>{if(o.length!==0){le({type:"Error",message:g.catFilter_notReorderable,position:"top-right"});return}const v=Ce({startIndex:s,closestEdgeOfTarget:u,indexOfTarget:l,axis:"vertical"});v!==s&&(w(f=>{const L=f.items[s];return{items:we({list:f.items,startIndex:s,finishIndex:v}),lastCardMoved:{item:L,previousIndex:s,currentIndex:v,numberOfItems:f.items.length}}}),r({oldIndex:s,newIndex:v}))},[o]);n.useEffect(()=>{if(C===null)return;const{item:s,previousIndex:l,currentIndex:u,numberOfItems:v}=C;Re(`You've moved ${s.name} from position ${l+1} to position ${u+1} of ${v}.`),setTimeout(()=>{y.scrollToIndex(u),setTimeout(()=>{const f=a.getElement(s.id);f&&he(f)},100)})},[C,y,a,t]),n.useEffect(()=>{const s=c.current;P(s);function l({source:u}){return F(u.data)&&u.data.instanceId===h}return U(Ee({canMonitor:l,onDrop({location:u,source:v}){const f=u.current.dropTargets[0];if(!f)return;const L=v.data,$=f.data;if(!F(L)||!F($))return;const _=x.findIndex(te=>te.id===$.item.id);if(_<0)return;const ee=J($);b({startIndex:L.index,indexOfTarget:_,closestEdgeOfTarget:ee})}}),ue({canScroll:l,element:s}))},[h,x,b,t]),n.useEffect(()=>function(){Oe()},[]);const m=n.useCallback(()=>p.length,[p.length]),I=n.useMemo(()=>({registerItem:a.register,reorderItem:b,instanceId:h,getListLength:m}),[a.register,b,h,m]),T=e.jsx("div",{style:{height:`${y.getTotalSize()}px`,width:"100%",position:"relative"},children:y.getVirtualItems().map(s=>e.jsx(ke,{item:p[s.index],virtualItem:s,index:s.index,position:Ae({index:s.index,items:p})},s.key))}),d=e.jsxs("div",{className:"grid gap-2 mb-2",children:[e.jsx(W,{icon:e.jsx(N,{size:24,className:"text-[var(--primaria)]"}),title:g.noneCategoryFound,description:g.noneCategoryFound_desFilter}),e.jsx(Y,{name:g.clear_filter,funcao:()=>i("")})]});return e.jsx("div",{className:"pl-2",style:{height:"calc(100vh - 210px)"},children:e.jsx(Z.Provider,{value:I,children:e.jsx(S,{ref:c,xcss:$e,children:p.length!==0?T:d})})})}function ct(){const{categories:t}=A(),{setActiveRenderCategoria:r}=K(),{language:o}=k(),i=e.jsxs("div",{className:"grid gap-2 mb-2 pb-4",children:[e.jsx(W,{icon:e.jsx(N,{size:24,className:"text-[var(--primaria)]"}),title:o.noneCategoryFound,description:o.noneCategoryFound_des}),e.jsx(Y,{name:o.createCategory,funcao:()=>r("createOrEdit")})]});return e.jsxs("div",{children:[e.jsx(Se,{}),t.length===0?i:e.jsx(_e,{})]})}export{ct as default};
