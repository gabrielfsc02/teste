import{j as e,_ as V,x as X,$ as K,ab as Q,ap as q,K as J,U as Y,ak as Z}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed10.js";import{a as c}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed4.js";import{p as ee,F as te}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed5.js";import{u as ae}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed32.js";import{a as se,u as ne}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed19.js";import{B as re,n as ie,o as le,Q as oe,aI as ce}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed22.js";import{A as N}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed200.js";import{R as de}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed201.js";import{W as _}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed18.js";import{a as me}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed107.js";import{U as xe}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed61.js";import{a as pe,b as fe}from"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed163.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed8.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed7.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed6.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed2.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed3.js";import"./v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed9.js";const ue=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_3_4_7_6e7deaa1-1876-4289-adc9-5c3b896aa7ed199.js")),[]));function he(){return e.jsx(c.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(ue,{})})}function ge({userId:l,name:d}){const{label:w}=se(),{variaveisWA:f}=re(),{agendamentos:x,agendamentosNaoDisparados:u,removeAgendamento:A,buttonActive:i,setButtonActive:C,openUserChat:D}=ae(),[g,j]=c.useState(!1),[m,I]=c.useState(i?x:x.filter(t=>t.userID===l)),{language:s}=ne(),[M,T]=c.useState(new Map),E=async t=>{const n=await _.Contact("getProfilePictureUrl",t),{name:a}=await _.Utils("getContato",t);return{nome:a,base64:n}},k=async t=>{const n=Array.from(new Set(t.map(r=>r.userID))),a=new Map;for(const r of n){const o=await E(r);a.set(r,o)}T(a)};c.useEffect(()=>{k(m)},[m]);const h=t=>M.get(t)||{nome:"",base64:""};c.useEffect(()=>{const t=new Date().getTime(),a=(i?x:x.filter(r=>r.userID===l)).sort((r,o)=>{const R=new Date(`${r.data}T${r.hora}:00`).getTime(),W=new Date(`${o.data}T${o.hora}:00`).getTime(),G=Math.abs(R-t),F=Math.abs(W-t);return G-F});I(a)},[x,i,l,u]);const{open:p}=ie(),{open:L}=le(),b=50,v=37,y="calc(85vh - 300px)",H=()=>{const t=m.length*b+v,n=parseInt(y.replace(/[^\d]/g,""));return Math.min(t,n)},S=t=>{p(e.jsx(N,{agendamento:t,create:!1,userId:l,name:d,tipo:"agendamento"}))},z=async()=>{p(e.jsx(N,{agendamento:null,create:!0,userId:l,name:d,tipo:"agendamento"}))},$=(t,n,a=!0)=>{const r=n,o=n.parentElement;L(t,{placement:"bottom-end"},r,0,{mounted:()=>{o.classList.add("_ajv9"),a&&r.classList.add("x11t6m9b")},desmouted:()=>{o.classList.remove("_ajv9"),r.classList.remove("x11t6m9b")}})},U=t=>{D(t.userID),p(e.jsx(ge,{userId:t.userID,name:d}))},O=({index:t,style:n})=>{const a=m[t];return e.jsxs("div",{style:n,className:"flex items-center rounded-lg hover:bg-base-200 cursor-pointer h-full border-solid border-b border-[var(--border-list)] last-of-type:border-none",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"break-words truncate",style:{maxWidth:"100px"},children:a.titulo})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[h(a.userID).base64==="undefined"?e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx(xe,{})}):e.jsx("img",{src:h(a.userID).base64,className:"w-8 h-8 rounded-full object-cover",alt:"User"}),e.jsx("p",{className:"break-words truncate",style:{maxWidth:"92px"},children:h(a.userID).nome})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.tipo}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:Y.converterData(a.data)}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.hora}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.recorrenciaManual?a.recorrencia?`${a.recorrencia} ${s.dias}`:s.vazia:s[a.recorrencia]||s.vazia}),e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-1",children:[e.jsx("span",{className:"pulse",onClick:()=>S(a),children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx("span",{className:"pulse",onClick:()=>A(a.id,"agendamento"),children:e.jsx(me,{className:"h-4 w-4"})}),i&&l!==a.userID&&e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-left",onClick:()=>U(a),"data-tip":s.agenOpenChat,children:e.jsx(ce,{className:"h-4 w-4"})})]})]},a.id)},P=()=>e.jsx("div",{className:"w-full border-collapse",children:e.jsxs("div",{className:"flex font-bold",children:[e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_titulo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_cliente}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_tipo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_data}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_hora}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_recorrencia}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_acao})]})}),B=()=>{j(!0),C(!i),setTimeout(()=>{j(!1)},700)};return e.jsxs("div",{className:"grid gap-4",style:{maxHeight:"90vh",width:"950px"},children:[e.jsxs("div",{className:"w-full flex items-center justify-between pr-2",children:[e.jsx("div",{className:`${g?"animate__animated animate__fadeIn":""}`,children:e.jsxs(X,{children:[i&&s.todas," ",s.agendamento_title," ",d?s.para+" "+d:""]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"bg-transparent border-solid border-[var(--primaria)] border rounded-lg text-[var(--primaria)] text-sm text-center self-center px-3 py-[4px] pulse relative",onClick:()=>p(e.jsx(de,{userId:l,name:d})),children:[e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[s.relatorio,e.jsx(oe,{})]}),e.jsx("div",{className:"badge badge-primary !bg-[var(--primaria)] !text-white badge-sm absolute -top-2 -right-2",children:i?u.length:u.filter(t=>t.userID===l).length})]}),e.jsx("button",{className:`border-solid border-[var(--primary)] border rounded-full text-center
            ${i?"bg-[var(--primary-muted)] text-white":"bg-transparent text-[var(--primary)]"}
            self-center px-3 py-[4px] pulse lg:tooltip lg:tooltip-bottom text-sm transition-all duration-300 ease-in`,onClick:()=>B(),"data-tip":i?s.ocultarContatosDesc:s.exibirContatosDesc,children:e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[i?s.ocultar:s.exibirTodos,i?e.jsx(pe,{}):e.jsx(fe,{})]})}),e.jsx("div",{className:f.confgIcone+"cursor-pointer pulse flex items-center justify-center !ml-0",children:e.jsx("div",{onClick:t=>$(e.jsx(he,{}),t.currentTarget),className:f.iconeStyle+"cursor-pointer x11xpdln x1d8287x x1h4ghdb",children:e.jsx("span",{className:f.modalOptions.animChildren+"flex items-center justify-center",children:e.jsx(K,{className:w.cor_primaria?"text-[var(--primaria)]":"text-[var(--panel-header-icon)]",size:20})})})})]})]}),e.jsx("div",{className:`${g?"animate__animated animate__fadeIn":""}`,children:m.length>0?e.jsxs("div",{style:{height:H(),maxHeight:y,width:"100%"},children:[e.jsx(P,{}),e.jsx(ee,{children:({height:t,width:n})=>e.jsx(te,{height:t-v,itemCount:m.length,itemSize:b,width:n,style:{overflowX:"hidden",width:n},children:O})})]}):e.jsx("div",{className:"!h-fit",children:e.jsx(Q,{title:s.agendamentoEmptyTitle,description:s.agendamentoEmptyDesc,icon:e.jsx(q,{className:"w-7 h-7 text-[var(--primaria)]"})})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(J,{name:s.create,funcao:z})})]})}export{ge as default};
